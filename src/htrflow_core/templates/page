<?xml version="1.0" encoding="UTF-8"?>
<PcGts xmlns="http://schema.primaresearch.org/PAGE/gts/pagecontent/2019-07-15" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://schema.primaresearch.org/PAGE/gts/pagecontent/2019-07-15 http://schema.primaresearch.org/PAGE/gts/pagecontent/2019-07-15/pagecontent.xsd">
    <Metadata>
        <Creator>{{ metadata.creator }}</Creator>
        <Created>{{ metadata.created }}</Created>
        <LastChange>{{ metadata.last_change }}</LastChange>
    </Metadata>
    <Page imageFilename="{{ page.image_path }}" imageWidth="{{ page.width }}" imageHeight="{{ page.height }}">
        <ReadingOrder>
            <OrderedGroup id='ro'>
                {%- for block in blocks recursive %}
                {%- if block.text %}
                    <RegionRefIndexed regionRef="{{ labels[block] }}" index="{{ loop.index-1 }}"/>
                {%- else %}
                <OrderedGroupIndexed id="ro_{{ labels[block] }}" index="{{ loop.index-1 }}">{{ loop(block.children) }}
                </OrderedGroupIndexed>
                {%- endif %}
                {%- endfor %}
            </OrderedGroup>
        </ReadingOrder>
        {%- for block in blocks %}
        <TextRegion id="{{ labels[block] }}">
            <Coords points="{% for point in block.polygon %}{{ point|join(',') }}{% if not loop.last %} {% endif %}{% endfor %}" />
            {%- for line in block.children %}
            <TextLine id="{{ labels[line] }}">
                <Coords points="{% for point in line.polygon %}{{ point|join(',') }}{% if not loop.last %} {% endif %}{% endfor %}" />
                <TextEquiv conf="{{ line.text.top_score() }}">
                    <Unicode>{{ line.text.top_candidate() }}</Unicode>
                </TextEquiv>
            </TextLine>
            {%- endfor %}
        </TextRegion>
        {%- endfor %}
    </Page>
</PcGts>
